<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tâm Thư Gửi Người Yêu</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@300;400;500;600;700&family=Dancing+Script:wght@400;500;600;700&family=Pacifico&family=Quicksand:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #ff6e95;
            --primary-light: #ffa4c0;
            --primary-dark: #e84f77;
            --secondary: #a269ff;
            --secondary-light: #c8a6ff;
            --accent: #ffcc4d;
            --dark: #555;
            --light: #fff;
            --bg-gradient: linear-gradient(135deg, #ff9a9e, #fad0c4, #fad0c4, #c2e9fb);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            transition: all 0.3s ease;
        }
        
        body {
            font-family: 'Comfortaa', sans-serif;
            background: var(--bg-gradient);
            background-size: 400% 400%;
            animation: gradient 15s ease infinite;
            color: var(--dark);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }
        
        @keyframes gradient {
            0% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
            100% {
                background-position: 0% 50%;
            }
        }
        
        .password-screen, .content {
            height: 100vh;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .password-screen {
            background: url('https://images.unsplash.com/photo-1518199266791-5375a83190b7?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80') center center/cover;
            position: fixed;
            top: 0;
            left: 0;
            z-index: 1000;
            background-blend-mode: overlay;
            background-color: rgba(255, 110, 149, 0.3);
        }
        
        .password-screen::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, rgba(0,0,0,0.4) 100%);
            z-index: -1;
        }
        
        .password-container {
            background-color: rgba(255, 255, 255, 0.92);
            padding: 40px;
            border-radius: 25px;
            box-shadow: 
                0 10px 30px rgba(0, 0, 0, 0.15),
                0 0 30px rgba(255, 110, 149, 0.4),
                inset 0 0 15px rgba(255, 255, 255, 0.8);
            text-align: center;
            max-width: 450px;
            width: 90%;
            transform: translateY(0);
            animation: float 6s ease-in-out infinite;
            position: relative;
            overflow: hidden;
        }
        
        @keyframes float {
            0% {
                transform: translateY(0px);
                box-shadow: 
                    0 10px 30px rgba(0, 0, 0, 0.15),
                    0 0 30px rgba(255, 110, 149, 0.4),
                    inset 0 0 15px rgba(255, 255, 255, 0.8);
            }
            50% {
                transform: translateY(-15px);
                box-shadow: 
                    0 20px 40px rgba(0, 0, 0, 0.2),
                    0 0 50px rgba(255, 110, 149, 0.6),
                    inset 0 0 15px rgba(255, 255, 255, 0.8);
            }
            100% {
                transform: translateY(0px);
                box-shadow: 
                    0 10px 30px rgba(0, 0, 0, 0.15),
                    0 0 30px rgba(255, 110, 149, 0.4),
                    inset 0 0 15px rgba(255, 255, 255, 0.8);
            }
        }
        
        .password-container::before {
            content: '';
            position: absolute;
            top: -10px;
            left: -10px;
            right: -10px;
            bottom: -10px;
            z-index: -1;
            background: linear-gradient(45deg, var(--primary), var(--secondary), var(--accent), var(--primary));
            background-size: 400% 400%;
            animation: gradient 15s ease infinite;
            filter: blur(20px);
            opacity: 0.3;
            border-radius: 30px;
        }
        
        .password-container h2 {
            font-family: 'Dancing Script', cursive;
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 20px;
            color: var(--primary);
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            position: relative;
            display: inline-block;
        }
        
        .password-container h2::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 5px;
            bottom: -5px;
            left: 0;
            background: linear-gradient(90deg, transparent, var(--primary), transparent);
            border-radius: 5px;
        }
        
        .password-container p {
            margin-bottom: 25px;
            font-size: 1.1rem;
            color: var(--dark);
            font-weight: 500;
        }
        
        .password-container input {
            padding: 15px;
            border: 2px solid #f0f0f0;
            border-radius: 15px;
            width: 100%;
            margin-bottom: 25px;
            font-size: 16px;
            font-family: 'Comfortaa', sans-serif;
            background: rgba(255, 255, 255, 0.9);
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.05);
            color: var(--dark);
            letter-spacing: 1px;
            transition: all 0.3s;
        }
        
        .password-container input:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 
                0 0 0 3px rgba(255, 110, 149, 0.3),
                inset 0 2px 5px rgba(0, 0, 0, 0.05);
        }
        
        .password-container button {
            background: linear-gradient(45deg, var(--primary), var(--primary-dark));
            color: white;
            border: none;
            padding: 15px 35px;
            border-radius: 30px;
            cursor: pointer;
            font-size: 18px;
            font-weight: 600;
            font-family: 'Comfortaa', sans-serif;
            transition: all 0.3s;
            box-shadow: 
                0 10px 20px rgba(232, 79, 119, 0.3),
                0 6px 6px rgba(0, 0, 0, 0.1),
                inset 0 -2px 5px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
            z-index: 1;
        }
        
        .password-container button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: all 0.5s;
            z-index: -1;
        }
        
        .password-container button:hover {
            transform: translateY(-5px);
            box-shadow: 
                0 15px 25px rgba(232, 79, 119, 0.4),
                0 10px 10px rgba(0, 0, 0, 0.1),
                inset 0 -2px 5px rgba(0, 0, 0, 0.1);
        }
        
        .password-container button:hover::before {
            left: 100%;
        }
        
        .content {
            display: none;
            padding-top: 80px;
        }
        
        header {
            text-align: center;
            margin-bottom: 40px;
            position: relative;
        }
        
        header h1 {
            font-family: 'Dancing Script', cursive;
            font-size: 4rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 15px;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.1);
            background: linear-gradient(45deg, var(--primary), var(--primary-dark), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        header p {
            font-size: 1.3rem;
            color: var(--dark);
            font-weight: 500;
            position: relative;
            display: inline-block;
            padding-bottom: 10px;
        }
        
        header p::after {
            content: '';
            position: absolute;
            width: 80px;
            height: 3px;
            bottom: 0;
            left: calc(50% - 40px);
            background: linear-gradient(90deg, transparent, var(--primary), transparent);
        }
        
        .love-days {
            text-align: center;
            font-size: 1.4rem;
            margin-bottom: 30px;
            color: var(--primary-dark);
            font-weight: 600;
            background-color: rgba(255, 255, 255, 0.7);
            padding: 12px 25px;
            border-radius: 50px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            display: inline-block;
            position: relative;
            margin: 0 auto 40px;
        }
        
        .love-days::before, .love-days::after {
            content: '❤';
            color: var(--primary);
            font-size: 1.5rem;
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
        }
        
        .love-days::before {
            left: 15px;
        }
        
        .love-days::after {
            right: 15px;
        }
        
        .main-container {
            max-width: 1000px;
            width: 90%;
            margin: 0 auto;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 30px;
            padding: 40px;
            box-shadow: 
                0 20px 50px rgba(0, 0, 0, 0.1),
                0 10px 20px rgba(255, 110, 149, 0.2),
                inset 0 0 50px rgba(255, 255, 255, 0.5);
            position: relative;
            z-index: 2;
            backdrop-filter: blur(10px);
        }
        
        .main-container::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            z-index: -1;
            background: linear-gradient(45deg, var(--primary), var(--secondary), var(--accent));
            border-radius: 32px;
            opacity: 0.5;
            filter: blur(10px);
        }
        
        .tabs {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 30px;
            position: relative;
        }
        
        .tabs::after {
            content: '';
            position: absolute;
            width: 90%;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--primary-light), transparent);
            bottom: -10px;
            left: 5%;
        }
        
        .tab-btn {
            padding: 12px 25px;
            background: rgba(255, 255, 255, 0.7);
            border: none;
            margin: 0 8px 10px;
            border-radius: 25px;
            cursor: pointer;
            font-family: 'Comfortaa', sans-serif;
            font-weight: 600;
            font-size: 1rem;
            color: var(--dark);
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            position: relative;
            overflow: hidden;
            z-index: 1;
        }
        
        .tab-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, var(--primary-light), var(--primary));
            z-index: -1;
            transition: transform 0.5s;
            transform: scaleX(0);
            transform-origin: right;
            border-radius: 25px;
        }
        
        .tab-btn:hover::before, .tab-btn.active::before {
            transform: scaleX(1);
            transform-origin: left;
        }
        
        .tab-btn:hover, .tab-btn.active {
            color: white;
            box-shadow: 
                0 7px 20px rgba(255, 110, 149, 0.3),
                0 5px 10px rgba(0, 0, 0, 0.1);
            transform: translateY(-3px);
        }
        
        .tab-btn.active {
            background: transparent;
        }
        
        .tab-btn i {
            margin-right: 8px;
        }
        
        .tab-content {
            display: none;
            padding: 30px 5px;
            animation: fadeIn 0.5s ease-in-out;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* Letter tab */
        .letter {
            font-family: 'Quicksand', sans-serif;
            line-height: 1.8;
            white-space: pre-wrap;
            background-color: rgba(255, 255, 255, 0.8);
            padding: 25px;
            border-radius: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            margin-top: 20px;
            min-height: 200px;
            position: relative;
        }
        
        .letter::before {
            content: '';
            position: absolute;
            top: 10px;
            left: 10px;
            right: 10px;
            bottom: 10px;
            border: 1px dashed var(--primary-light);
            border-radius: 15px;
            pointer-events: none;
        }
        
        .edit-letter {
            width: 100%;
            min-height: 250px;
            padding: 25px;
            border: 2px solid #f3f3f3;
            border-radius: 20px;
            font-family: 'Quicksand', sans-serif;
            font-size: 1rem;
            margin-bottom: 20px;
            resize: vertical;
            color: var(--dark);
            background-color: rgba(255, 255, 255, 0.9);
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.05);
            transition: all 0.3s;
        }
        
        .edit-letter:focus {
            outline: none;
            border-color: var(--primary-light);
            box-shadow: 
                0 0 0 3px rgba(255, 110, 149, 0.2),
                inset 0 2px 5px rgba(0, 0, 0, 0.05);
        }
        
        .text-controls {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-bottom: 20px;
            background-color: rgba(255, 255, 255, 0.8);
            padding: 15px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .text-controls-title {
            width: 100%;
            font-weight: 600;
            color: var(--primary-dark);
            margin-bottom: 10px;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .control-group {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        .control-group label {
            font-size: 0.9rem;
            color: var(--dark);
        }
        
        .font-selector, .color-picker {
            padding: 10px 15px;
            border: 2px solid #f3f3f3;
            border-radius: 10px;
            font-family: 'Comfortaa', sans-serif;
            font-size: 0.9rem;
            background-color: white;
        }
        
        .font-selector {
            min-width: 150px;
        }
        
        .font-selector:focus, .color-picker:focus {
            outline: none;
            border-color: var(--primary-light);
        }
        
        .effect-btn {
            padding: 10px 18px;
            background-color: white;
            color: var(--dark);
            border: 2px solid #f3f3f3;
            border-radius: 10px;
            cursor: pointer;
            font-family: 'Comfortaa', sans-serif;
            font-size: 0.9rem;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .effect-btn:hover {
            background-color: var(--primary-light);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.05);
        }
        
        .effect-btn.active {
            background-color: var(--primary);
            color: white;
            border-color: var(--primary);
        }
        
        .save-letter {
            background: linear-gradient(45deg, #4CAF50, #43a047);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 30px;
            cursor: pointer;
            font-size: 1rem;
            font-family: 'Comfortaa', sans-serif;
            font-weight: 600;
            margin-top: 20px;
            box-shadow: 
                0 10px 20px rgba(76, 175, 80, 0.3),
                0 6px 6px rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }
        
        .save-letter i {
            margin-right: 8px;
        }
        
        .save-letter:hover {
            transform: translateY(-3px);
            box-shadow: 
                0 15px 25px rgba(76, 175, 80, 0.4),
                0 10px 10px rgba(0, 0, 0, 0.05);
        }
        
        .save-letter:active {
            transform: translateY(-1px);
        }
        
        /* Gallery tab */
        .gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
        }
        
        .gallery-item {
            position: relative;
            height: 200px;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            transition: all 0.3s;
        }
        
        .gallery-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(to top, rgba(0, 0, 0, 0.3), transparent);
            z-index: 1;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .gallery-item:hover::before {
            opacity: 1;
        }
        
        .gallery-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s;
        }
        
        .gallery-item:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 30px rgba(0, 0, 0, 0.15);
        }
        
        .gallery-item:hover img {
            transform: scale(1.1);
        }
        
        .gallery-item .caption {
            position: absolute;
            bottom: -50px;
            left: 0;
            right: 0;
            padding: 15px;
            background: rgba(255, 255, 255, 0.9);
            color: var(--primary-dark);
            font-weight: 600;
            text-align: center;
            transition: bottom 0.3s;
            z-index: 2;
        }
        
        .gallery-item:hover .caption {
            bottom: 0;
        }
        
        .add-image {
            height: 200px;
            border: 2px dashed var(--primary-light);
            border-radius: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: var(--primary);
            background-color: rgba(255, 255, 255, 0.7);
            transition: all 0.3s;
        }
        
        .add-image:hover {
            background-color: rgba(255, 255, 255, 0.9);
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(255, 110, 149, 0.2);
        }
        
        .add-image i {
            font-size: 40px;
            margin-bottom: 15px;
            color: var(--primary);
        }
        
        /* Timeline tab */
        .timeline {
            position: relative;
            max-width: 800px;
            margin: 0 auto;
            padding-top: 20px;
        }
        
        .timeline::after {
            content: '';
            position: absolute;
            width: 3px;
            background: linear-gradient(to bottom, var(--primary-light), var(--secondary-light));
            top: 0;
            bottom: 0;
            left: 50%;
            margin-left: -1.5px;
            border-radius: 3px;
        }
        
        .timeline-item {
            padding: 15px 40px;
            position: relative;
            width: 50%;
            box-sizing: border-box;
            margin-bottom: 30px;
            animation: fadeInUp 1s;
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .timeline-item:nth-child(odd) {
            left: 0;
        }
        
        .timeline-item:nth-child(even) {
            left: 50%;
        }
        
        .timeline-item::after {
            content: '❤';
            position: absolute;
            width: 30px;
            height: 30px;
            background-color: white;
            border: 3px solid var(--primary);
            border-radius: 50%;
            top: 15px;
            z-index: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary);
            font-size: 12px;
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1);
        }
        
        .timeline-item:nth-child(odd)::after {
            right: -17px;
        }
        
        .timeline-item:nth-child(even)::after {
            left: -17px;
        }
        
        .timeline-content {
            padding: 25px;
            background-color: white;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
            position: relative;
            transition: all 0.3s;
        }
        
        .timeline-content:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.12);
        }
        
        .timeline-item:nth-child(odd) .timeline-content {
            border-radius: 20px 20px 20px 0;
        }
        
        .timeline-item:nth-child(even) .timeline-content {
            border-radius: 20px 20px 0 20px;
        }
        
        .timeline-date {
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 10px;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
        }
        
        .timeline-date i {
            margin-right: 8px;
        }
        
        .timeline-text {
            line-height: 1.8;
            color: var(--dark);
        }
        
        .add-memory {
            display: block;
            margin: 30px auto;
            background: linear-gradient(45deg, var(--primary), var(--primary-dark));
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 30px;
            cursor: pointer;
            font-size: 1rem;
            font-family: 'Comfortaa', sans-serif;
            font-weight: 600;
            box-shadow: 
                0 10px 20px rgba(255, 110, 149, 0.3),
                0 6px 6px rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }
        
        .add-memory i {
            margin-right: 8px;
        }
        
        .add-memory:hover {
            transform: translateY(-3px);
            box-shadow: 
                0 15px 25px rgba(255, 110, 149, 0.4),
                0 10px 10px rgba(0, 0, 0, 0.05);
        }
        
        /* Settings tab */
        .settings-section {
            background-color: white;
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
        }
        
        .settings-section h3 {
            color: var(--primary);
            margin-bottom: 20px;
            font-size: 1.3rem;
            position: relative;
            padding-left: 30px;
        }
        
        .settings-section h3 i {
            position: absolute;
            left: 0;
            top: 4px;
        }
        
        .settings-option {
            margin: 20px 0;
            display: flex;
            align-items: center;
        }
        
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 30px;
            margin-right: 15px;
        }
        
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: 0.4s;
            border-radius: 34px;
        }
        
        .toggle-slider:before {
            position: absolute;
            content: '';
            height: 22px;
            width: 22px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: 0.4s;
            border-radius: 50%;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        
        input:checked + .toggle-slider {
            background-color: var(--primary);
        }
        
        input:checked + .toggle-slider:before {
            transform: translateX(30px);
        }
        
        .date-input {
            padding: 12px;
            border: 2px solid #f0f0f0;
            border-radius: 10px;
            font-family: 'Comfortaa', sans-serif;
            margin-left: 15px;
        }
        
        .date-input:focus {
            outline: none;
            border-color: var(--primary-light);
        }
        
        .password-input {
            padding: 12px;
            border: 2px solid #f0f0f0;
            border-radius: 10px;
            width: 100%;
            max-width: 300px;
            margin-bottom: 15px;
            font-family: 'Comfortaa', sans-serif;
        }
        
        .password-input:focus {
            outline: none;
            border-color: var(--primary-light);
        }
        
        .save-settings {
            background: linear-gradient(45deg, var(--primary), var(--primary-dark));
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 30px;
            cursor: pointer;
            font-family: 'Comfortaa', sans-serif;
            font-weight: 600;
            box-shadow: 0 5px 15px rgba(255, 110, 149, 0.3);
            display: flex;
            align-items: center;
        }
        
        .save-settings i {
            margin-right: 8px;
        }
        
        .save-settings:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(255, 110, 149, 0.4);
        }
        
        /* Music Control */
        .music-control {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 100;
            background: linear-gradient(45deg, var(--primary), var(--primary-dark));
            border-radius: 50%;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 
                0 10px 20px rgba(255, 110, 149, 0.3),
                0 6px 6px rgba(0, 0, 0, 0.1);
            transition: all 0.3s;
        }
        
        .music-control:hover {
            transform: scale(1.1) rotate(10deg);
        }
        
        .music-control i {
            font-size: 24px;
            color: white;
        }
        
        /* Hearts animation */
        @keyframes heartFloat {
            0% {
                transform: translateY(0) rotate(0deg) scale(1);
                opacity: 0;
            }
            10% {
                opacity: 0.8;
            }
            50% {
                transform: translateY(-50vh) rotate(180deg) scale(1.5);
            }
            100% {
                transform: translateY(-100vh) rotate(360deg) scale(1);
                opacity: 0;
            }
        }
        
        .hearts-container {
            position: fixed;
            bottom: -100px;
            left: 0;
            width: 100%;
            height: 100vh;
            overflow: hidden;
            pointer-events: none;
            z-index: 1;
        }
        
        .heart {
            position: absolute;
            bottom: 0;
            color: var(--primary);
            font-size: 20px;
            animation: heartFloat 15s linear infinite;
            filter: drop-shadow(0 3px 5px rgba(0, 0, 0, 0.1));
            will-change: transform;
        }
        
        /* Snow animation */
        @keyframes snowFall {
            0% {
                transform: translateY(0) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }
        
        .snow-container {
            position: fixed;
            top: -50px;
            left: 0;
            width: 100%;
            height: 100vh;
            overflow: hidden;
            pointer-events: none;
            z-index: 1;
            display: none;
        }
        
        .snowflake {
            position: absolute;
            top: 0;
            color: white;
            font-size: 15px;
            text-shadow: 0 0 5px rgba(255,255,255,0.7);
            animation: snowFall 10s linear infinite;
            filter: drop-shadow(0 3px 5px rgba(0, 0, 0, 0.05));
            will-change: transform;
        }
        
        /* Fireworks animation */
        @keyframes explode {
            0% {
                transform: scale(0);
                opacity: 1;
            }
            100% {
                transform: scale(1);
                opacity: 0;
            }
        }
        
        .fireworks-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }
        
        .firework {
            position: absolute;
            width: 5px;
            height: 5px;
            border-radius: 50%;
            animation: explode 1.5s ease-out forwards;
        }
        
        /* Modal */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
        }
        
        .modal.show {
            opacity: 1;
            visibility: visible;
        }
        
        .modal-content {
            background-color: white;
            border-radius: 20px;
            padding: 30px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
            transform: scale(0.8);
            transition: all 0.3s;
        }
        
        .modal.show .modal-content {
            transform: scale(1);
        }
        
        .modal-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }
        
        .modal-title {
            font-size: 1.5rem;
            color: var(--primary);
            font-weight: 600;
        }
        
        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: #999;
            cursor: pointer;
        }
        
        .modal-form {
            display: flex;
            flex-direction: column;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark);
        }
        
        .form-group input, .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #f0f0f0;
            border-radius: 10px;
            font-family: 'Comfortaa', sans-serif;
        }
        
        .form-group input:focus, .form-group textarea:focus {
            outline: none;
            border-color: var(--primary-light);
        }
        
        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }
        
        .modal-submit {
            background: linear-gradient(45deg, var(--primary), var(--primary-dark));
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 30px;
            cursor: pointer;
            font-family: 'Comfortaa', sans-serif;
            font-weight: 600;
            align-self: flex-end;
            box-shadow: 0 5px 15px rgba(255, 110, 149, 0.3);
        }
        
        .modal-submit:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(255, 110, 149, 0.4);
        }
        
        /* Decorations */
        .decoration {
            position: absolute;
            pointer-events: none;
            z-index: 0;
            opacity: 0.5;
        }
        
        .decoration.top-left {
            top: 20px;
            left: 20px;
            font-size: 40px;
            color: var(--primary-light);
            animation: rotate 10s linear infinite;
        }
        
        .decoration.top-right {
            top: 40px;
            right: 40px;
            font-size: 30px;
            color: var(--secondary-light);
            animation: float-slow 8s ease-in-out infinite;
        }
        
        .decoration.bottom-left {
            bottom: 30px;
            left: 40px;
            font-size: 35px;
            color: var(--accent);
            animation: float-slow 9s ease-in-out infinite;
        }
        
        .decoration.bottom-right {
            bottom: 40px;
            right: 30px;
            font-size: 40px;
            color: var(--primary-light);
            animation: rotate 12s linear infinite reverse;
        }
        
        @keyframes rotate {
            from {
                transform: rotate(0deg);
            }
            to {
                transform: rotate(360deg);
            }
        }
        
        @keyframes float-slow {
            0% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-20px);
            }
            100% {
                transform: translateY(0);
            }
        }
        
        /* Custom font styles for the letter */
        .font-comfortaa {
            font-family: 'Comfortaa', sans-serif;
        }
        
        .font-dancing-script {
            font-family: 'Dancing Script', cursive;
        }
        
        .font-pacifico {
            font-family: 'Pacifico', cursive;
        }
        
        .font-quicksand {
            font-family: 'Quicksand', sans-serif;
        }
        
        /* Text effects */
        .effect-shadow {
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .effect-glow {
            text-shadow: 0 0 10px var(--primary-light), 0 0 20px var(--primary-light);
        }
        
        .effect-gradient {
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            display: inline;
        }
        
        /* Loading spinner */
        .loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.9);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 2000;
        }
        
        .loading-spinner {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: 5px solid transparent;
            border-top-color: var(--primary);
            border-bottom-color: var(--primary);
            animation: spin 1.2s linear infinite;
        }
        
        .loading-text {
            margin-top: 20px;
            font-size: 1.2rem;
            color: var(--primary);
            font-weight: 600;
        }
        
        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }
        
        /* Notification */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: white;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            z-index: 1500;
            transform: translateX(150%);
            transition: transform 0.5s;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification i {
            margin-right: 10px;
            color: var(--primary);
            font-size: 1.2rem;
        }
        
        .notification.success i {
            color: #4CAF50;
        }
        
        /* Responsive styles */
        @media (max-width: 768px) {
            header h1 {
                font-size: 3rem;
            }
            
            .main-container {
                padding: 25px;
            }
            
            .timeline::after {
                left: 31px;
            }
            
            .timeline-item {
                width: 100%;
                padding-left: 70px;
                padding-right: 25px;
            }
            
            .timeline-item:nth-child(even) {
                left: 0;
            }
            
            .timeline-item::after {
                left: 18px;
            }
            
            .timeline-item:nth-child(odd)::after {
                right: auto;
                left: 18px;
            }
            
            .timeline-item:nth-child(odd) .timeline-content {
                border-radius: 20px 20px 20px 20px;
            }
            
            .timeline-item:nth-child(even) .timeline-content {
                border-radius: 20px 20px 20px 20px;
            }
            
            .text-controls {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .control-group {
                width: 100%;
                margin-bottom: 10px;
            }
        }
        
        @media (max-width: 480px) {
            .tab-btn {
                padding: 10px 15px;
                font-size: 0.9rem;
            }
            
            .love-days {
                font-size: 1.1rem;
                padding: 10px 20px;
            }
            
            .love-days::before, .love-days::after {
                display: none;
            }
            
            .gallery {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div class="loading" id="loadingScreen">
        <div class="loading-spinner"></div>
        <div class="loading-text">Đang tải tâm thư...</div>
    </div>

    <!-- Password Screen -->
    <div class="password-screen" id="passwordScreen">
        <div class="password-container">
            <h2>Tâm Thư Yêu Thương</h2>
            <p>Nhập mật khẩu để mở lá thư tình này</p>
            <input type="password" id="passwordInput" placeholder="Nhập mật khẩu...">
            <button id="submitPassword"><i class="fas fa-heart"></i> Mở Thư</button>
        </div>
    </div>
    
    <!-- Notification -->
    <div class="notification" id="notification">
        <i class="fas fa-check-circle"></i>
        <span id="notificationText">Thông báo</span>
    </div>
    
    <!-- Main Content -->
    <div class="content" id="mainContent">
        <header>
            <h1>Tâm Thư Gửi Người Yêu</h1>
            <p>Những lời yêu thương chân thành nhất...</p>
        </header>
        
        <div class="love-days" id="loveDays">
            Chúng ta đã yêu nhau được <span id="daysCount">0</span> ngày
        </div>
        
        <div class="main-container">
            <div class="tabs">
                <button class="tab-btn active" data-tab="letter"><i class="fas fa-envelope-open-heart"></i> Tâm Thư</button>
                <button class="tab-btn" data-tab="gallery"><i class="fas fa-images"></i> Kỷ Niệm</button>
                <button class="tab-btn" data-tab="timeline"><i class="fas fa-clock"></i> Dòng Thời Gian</button>
                <button class="tab-btn" data-tab="settings"><i class="fas fa-cog"></i> Cài Đặt</button>
            </div>
            
            <!-- Letter Tab -->
            <div class="tab-content active" id="letter">
                <div class="edit-controls">
                    <div class="text-controls">
                        <div class="text-controls-title"><i class="fas fa-paint-brush"></i> Tùy chỉnh văn bản</div>
                        <div class="control-group">
                            <label>Font chữ:</label>
                            <select class="font-selector" id="fontSelector">
                                <option value="font-quicksand">Quicksand</option>
                                <option value="font-dancing-script">Dancing Script</option>
                                <option value="font-pacifico">Pacifico</option>
                                <option value="font-comfortaa">Comfortaa</option>
                            </select>
                        </div>
                        <div class="control-group">
                            <label>Màu sắc:</label>
                            <input type="color" class="color-picker" id="colorPicker" value="#ff6e95">
                        </div>
                        <div class="control-group">
                            <label>Hiệu ứng:</label>
                            <button class="effect-btn" data-effect="effect-shadow">Bóng</button>
                            <button class="effect-btn" data-effect="effect-glow">Phát Sáng</button>
                            <button class="effect-btn" data-effect="effect-gradient">Gradient</button>
                        </div>
                    </div>
                    <textarea class="edit-letter" id="letterEditor" placeholder="Nhập tâm thư của bạn tại đây...

Gửi người yêu của anh,

Anh không giỏi thể hiện cảm xúc bằng lời nói, nên anh viết ra những dòng này để em biết rằng em là điều tuyệt vời nhất trong cuộc sống của anh.

Mỗi khoảnh khắc bên em đều là khoảnh khắc quý giá. Mỗi nụ cười của em đều làm trái tim anh rung động. Mỗi ngày trôi qua đều đáng giá vì có em bên cạnh.

Anh yêu em nhiều lắm!"></textarea>
                    <button class="save-letter" id="saveLetter"><i class="fas fa-save"></i> Lưu Tâm Thư</button>
                </div>
                <div class="letter" id="letterDisplay"></div>
            </div>
            
            <!-- Gallery Tab -->
            <div class="tab-content" id="gallery">
                <div class="gallery">
                    <div class="add-image" id="addImage">
                        <i class="fas fa-plus-circle"></i>
                        <p>Thêm ảnh kỷ niệm</p>
                    </div>
                    <!-- Sample images -->
                    <div class="gallery-item">
                        <img src="https://images.unsplash.com/photo-1522119067110-34ab169d8507?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80" alt="Kỷ niệm">
                        <div class="caption">Ngày đầu tiên</div>
                    </div>
                    <div class="gallery-item">
                        <img src="https://images.unsplash.com/photo-1556742031-c6961e8560b0?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80" alt="Kỷ niệm">
                        <div class="caption">Bình minh cùng nhau</div>
                    </div>
                    <div class="gallery-item">
                        <img src="https://images.unsplash.com/photo-1549221952-37f4399abb8a?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80" alt="Kỷ niệm">
                        <div class="caption">Chuyến đi biển</div>
                    </div>
                    <div class="gallery-item">
                        <img src="https://images.unsplash.com/photo-1474552226712-ac0f0961a954?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80" alt="Kỷ niệm">
                        <div class="caption">Lễ kỷ niệm</div>
                    </div>
                </div>
            </div>
            
            <!-- Timeline Tab -->
            <div class="tab-content" id="timeline">
                <div class="timeline" id="timelineContainer">
                    <div class="timeline-item">
                        <div class="timeline-content">
                            <div class="timeline-date"><i class="fas fa-calendar-heart"></i> 12/01/2024</div>
                            <div class="timeline-text">Ngày chúng ta gặp nhau lần đầu tiên tại quán cafe ấy. Ánh mắt em đã làm trái tim anh rung động.</div>
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-content">
                            <div class="timeline-date"><i class="fas fa-calendar-heart"></i> 14/02/2024</div>
                            <div class="timeline-text">Valentine đầu tiên của chúng ta. Anh vẫn nhớ nụ cười rạng rỡ của em khi nhận được bó hoa hồng.</div>
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-content">
                            <div class="timeline-date"><i class="fas fa-calendar-heart"></i> 20/03/2024</div>
                            <div class="timeline-text">Chuyến du lịch đầu tiên cùng nhau. Biển xanh, cát trắng và nắng vàng - cùng với tình yêu của chúng ta.</div>
                        </div>
                    </div>
                </div>
                <button class="add-memory" id="addMemory"><i class="fas fa-plus"></i> Thêm Kỷ Niệm</button>
            </div>
            
            <!-- Settings Tab -->
            <div class="tab-content" id="settings">
                <div class="settings-section">
                    <h3><i class="fas fa-magic"></i> Cài Đặt Hiệu Ứng</h3>
                    <div class="settings-option">
                        <label class="toggle-switch">
                            <input type="checkbox" id="toggleHearts" checked>
                            <span class="toggle-slider"></span>
                        </label>
                        <span>Hiệu ứng trái tim bay</span>
                    </div>
                    <div class="settings-option">
                        <label class="toggle-switch">
                            <input type="checkbox" id="toggleSnow">
                            <span class="toggle-slider"></span>
                        </label>
                        <span>Hiệu ứng tuyết rơi</span>
                    </div>
                    <div class="settings-option">
                        <label class="toggle-switch">
                            <input type="checkbox" id="toggleFireworks">
                            <span class="toggle-slider"></span>
                        </label>
                        <span>Hiệu ứng pháo hoa</span>
                    </div>
                </div>
                
                <div class="settings-section">
                    <h3><i class="fas fa-calendar-heart"></i> Cài Đặt Ngày Kỷ Niệm</h3>
                    <div class="settings-option">
                        <span>Ngày bắt đầu yêu nhau:</span>
                        <input type="date" id="anniversaryDate" class="date-input">
                    </div>
                </div>
                
                <div class="settings-section">
                    <h3><i class="fas fa-lock"></i> Đổi Mật Khẩu</h3>
                    <div style="margin: 20px 0;">
                        <input type="password" id="newPassword" class="password-input" placeholder="Nhập mật khẩu mới">
                        <button id="savePassword" class="save-settings"><i class="fas fa-save"></i> Lưu Mật Khẩu</button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Music Control -->
        <div class="music-control" id="musicControl">
            <i class="fas fa-music"></i>
        </div>
        
        <!-- Audio Element -->
        <audio id="bgMusic" loop>
            <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mp3">
            Your browser does not support the audio element.
        </audio>
        
        <!-- Animations Containers -->
        <div class="hearts-container" id="heartsContainer"></div>
        <div class="snow-container" id="snowContainer"></div>
        <div class="fireworks-container" id="fireworksContainer"></div>
        
        <!-- Decorative elements -->
        <div class="decoration top-left"><i class="fas fa-heart"></i></div>
        <div class="decoration top-right"><i class="fas fa-dove"></i></div>
        <div class="decoration bottom-left"><i class="fas fa-star"></i></div>
        <div class="decoration bottom-right"><i class="fas fa-heart"></i></div>
    </div>
    
    <!-- Add Memory Modal -->
    <div class="modal" id="memoryModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Thêm Kỷ Niệm Mới</h3>
                <button class="modal-close" id="closeMemoryModal">&times;</button>
            </div>
            <form class="modal-form" id="memoryForm">
                <div class="form-group">
                    <label for="memoryDate">Ngày kỷ niệm:</label>
                    <input type="date" id="memoryDate" required>
                </div>
                <div class="form-group">
                    <label for="memoryText">Mô tả kỷ niệm:</label>
                    <textarea id="memoryText" placeholder="Viết về kỷ niệm đặc biệt của bạn..." required></textarea>
                </div>
                <button type="submit" class="modal-submit">Lưu Kỷ Niệm</button>
            </form>
        </div>
    </div>
    
    <!-- Add Image Modal -->
    <div class="modal" id="imageModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Thêm Ảnh Mới</h3>
                <button class="modal-close" id="closeImageModal">&times;</button>
            </div>
            <form class="modal-form" id="imageForm">
                <div class="form-group">
                    <label for="imageUrl">URL Ảnh:</label>
                    <input type="text" id="imageUrl" placeholder="https://example.com/your-image.jpg" required>
                    <small style="display: block; margin-top: 5px; color: #666;">(Trong bản thực tế, bạn có thể tải ảnh lên từ máy tính)</small>
                </div>
                                <div class="form-group">
                    <label for="imageCaption">Chú thích:</label>
                    <input type="text" id="imageCaption" placeholder="Mô tả về ảnh..." required>
                </div>
                <button type="submit" class="modal-submit">Lưu Ảnh</button>
            </form>
        </div>
    </div>
    
    <script>
        // Default password (You can change this)
        let password = "iloveyou";
        
        // Elements
        const loadingScreen = document.getElementById('loadingScreen');
        const passwordScreen = document.getElementById('passwordScreen');
        const mainContent = document.getElementById('mainContent');
        const passwordInput = document.getElementById('passwordInput');
        const submitPassword = document.getElementById('submitPassword');
        const musicControl = document.getElementById('musicControl');
        const bgMusic = document.getElementById('bgMusic');
        const heartsContainer = document.getElementById('heartsContainer');
        const snowContainer = document.getElementById('snowContainer');
        const fireworksContainer = document.getElementById('fireworksContainer');
        const toggleHearts = document.getElementById('toggleHearts');
        const toggleSnow = document.getElementById('toggleSnow');
        const toggleFireworks = document.getElementById('toggleFireworks');
        const daysCount = document.getElementById('daysCount');
        const anniversaryDate = document.getElementById('anniversaryDate');
        const savePassword = document.getElementById('savePassword');
        const newPassword = document.getElementById('newPassword');
        const notification = document.getElementById('notification');
        const notificationText = document.getElementById('notificationText');
        
        // Letter elements
        const letterEditor = document.getElementById('letterEditor');
        const letterDisplay = document.getElementById('letterDisplay');
        const fontSelector = document.getElementById('fontSelector');
        const colorPicker = document.getElementById('colorPicker');
        const effectBtns = document.querySelectorAll('.effect-btn');
        const saveLetter = document.getElementById('saveLetter');
        
        // Tab elements
        const tabBtns = document.querySelectorAll('.tab-btn');
        const tabContents = document.querySelectorAll('.tab-content');
        
        // Memory elements
        const addMemory = document.getElementById('addMemory');
        const memoryModal = document.getElementById('memoryModal');
        const closeMemoryModal = document.getElementById('closeMemoryModal');
        const memoryForm = document.getElementById('memoryForm');
        const memoryDate = document.getElementById('memoryDate');
        const memoryText = document.getElementById('memoryText');
        
        // Image elements
        const addImage = document.getElementById('addImage');
        const imageModal = document.getElementById('imageModal');
        const closeImageModal = document.getElementById('closeImageModal');
        const imageForm = document.getElementById('imageForm');
        const imageUrl = document.getElementById('imageUrl');
        const imageCaption = document.getElementById('imageCaption');
        
        // Simulating loading time
        setTimeout(() => {
            loadingScreen.style.display = 'none';
        }, 2000);
        
        // Check password
        submitPassword.addEventListener('click', () => {
            if (passwordInput.value === password) {
                passwordScreen.style.display = 'none';
                mainContent.style.display = 'block';
                
                // Play background music
                bgMusic.volume = 0.3;
                bgMusic.play();
                
                // Start animations if enabled
                if (toggleHearts.checked) {
                    startHeartsAnimation();
                }
                
                if (toggleSnow.checked) {
                    startSnowAnimation();
                }
                
                if (toggleFireworks.checked) {
                    startFireworksAnimation();
                }
            } else {
                passwordInput.classList.add('shake');
                setTimeout(() => {
                    passwordInput.classList.remove('shake');
                }, 500);
                showNotification('Mật khẩu không đúng. Vui lòng thử lại!', 'error');
            }
        });
        
        // Allow Enter key to submit password
        passwordInput.addEventListener('keyup', (e) => {
            if (e.key === 'Enter') {
                submitPassword.click();
            }
        });
        
        // Music control
        let isMusicPlaying = false;
        musicControl.addEventListener('click', () => {
            if (isMusicPlaying) {
                bgMusic.pause();
                musicControl.innerHTML = '<i class="fas fa-music"></i>';
            } else {
                bgMusic.play();
                musicControl.innerHTML = '<i class="fas fa-pause"></i>';
            }
            isMusicPlaying = !isMusicPlaying;
        });
        
        // Tab switching
        tabBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                // Remove active class from all buttons and contents
                tabBtns.forEach(b => b.classList.remove('active'));
                tabContents.forEach(c => c.classList.remove('active'));
                
                // Add active class to clicked button and corresponding content
                btn.classList.add('active');
                document.getElementById(btn.dataset.tab).classList.add('active');
            });
        });
        
        // Letter formatting
        let currentFont = 'font-quicksand';
        let currentColor = '#ff6e95';
        let currentEffects = [];
        
        fontSelector.addEventListener('change', () => {
            currentFont = fontSelector.value;
            updateLetterPreview();
        });
        
        colorPicker.addEventListener('input', () => {
            currentColor = colorPicker.value;
            updateLetterPreview();
        });
        
        effectBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                const effect = btn.dataset.effect;
                
                if (currentEffects.includes(effect)) {
                    // Remove effect if already applied
                    currentEffects = currentEffects.filter(e => e !== effect);
                    btn.classList.remove('active');
                } else {
                    // Add effect
                    currentEffects.push(effect);
                    btn.classList.add('active');
                }
                
                updateLetterPreview();
            });
        });
        
        letterEditor.addEventListener('input', updateLetterPreview);
        
        function updateLetterPreview() {
            // Apply text formatting
            letterDisplay.className = 'letter ' + currentFont + ' ' + currentEffects.join(' ');
            letterDisplay.style.color = currentColor;
            letterDisplay.textContent = letterEditor.value;
        }
        
        saveLetter.addEventListener('click', () => {
            // Save letter to localStorage
            const letterData = {
                text: letterEditor.value,
                font: currentFont,
                color: currentColor,
                effects: currentEffects
            };
            
            localStorage.setItem('savedLetter', JSON.stringify(letterData));
            showNotification('Tâm thư đã được lưu thành công!', 'success');
            
            // Trigger fireworks
            for (let i = 0; i < 5; i++) {
                setTimeout(() => {
                    createFirework();
                }, i * 300);
            }
        });
        
        // Load saved letter if exists
        if (localStorage.getItem('savedLetter')) {
            const letterData = JSON.parse(localStorage.getItem('savedLetter'));
            letterEditor.value = letterData.text;
            currentFont = letterData.font;
            currentColor = letterData.color;
            currentEffects = letterData.effects;
            
            // Update UI to match saved data
            fontSelector.value = currentFont;
            colorPicker.value = currentColor;
            
            effectBtns.forEach(btn => {
                const effect = btn.dataset.effect;
                if (currentEffects.includes(effect)) {
                    btn.classList.add('active');
                }
            });
            
            updateLetterPreview();
        } else {
            // Initialize with default text
            updateLetterPreview();
        }
        
        // Show notification
        function showNotification(message, type = 'info') {
            notificationText.textContent = message;
            notification.className = 'notification show';
            
            if (type === 'success') {
                notification.classList.add('success');
                notification.innerHTML = '<i class="fas fa-check-circle"></i>' + message;
            } else if (type === 'error') {
                notification.classList.add('error');
                notification.innerHTML = '<i class="fas fa-exclamation-circle"></i>' + message;
            } else {
                notification.innerHTML = '<i class="fas fa-info-circle"></i>' + message;
            }
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }
        
        // Hearts animation
        function startHeartsAnimation() {
            heartsContainer.innerHTML = '';
            
            // Create 50 hearts
            for (let i = 0; i < 50; i++) {
                createHeart();
            }
            
            // Continue creating hearts
            setInterval(createHeart, 300);
        }
        
        function createHeart() {
            const heart = document.createElement('div');
            heart.innerHTML = '<i class="fas fa-heart"></i>';
            heart.classList.add('heart');
            
            // Random position and size
            const size = Math.random() * 20 + 10;
            heart.style.left = Math.random() * 100 + 'vw';
            heart.style.fontSize = size + 'px';
            
            // Random animation duration
            const duration = Math.random() * 15 + 5;
            heart.style.animationDuration = duration + 's';
            
            // Random delay
            const delay = Math.random() * 5;
            heart.style.animationDelay = delay + 's';
            
            // Random color
            const colors = ['#ff6e95', '#ff9eb5', '#ff5376', '#ff8da6'];
            heart.style.color = colors[Math.floor(Math.random() * colors.length)];
            
            heartsContainer.appendChild(heart);
            
            // Remove heart after animation completes
            setTimeout(() => {
                heart.remove();
            }, (duration + delay) * 1000);
        }
        
        // Snow animation
        function startSnowAnimation() {
            snowContainer.style.display = 'block';
            snowContainer.innerHTML = '';
            
            // Create 100 snowflakes
            for (let i = 0; i < 100; i++) {
                createSnowflake();
            }
            
            // Continue creating snowflakes
            setInterval(createSnowflake, 200);
        }
        
        function createSnowflake() {
            const snowflake = document.createElement('div');
            snowflake.innerHTML = '❄';
            snowflake.classList.add('snowflake');
            
            // Random position and size
            const size = Math.random() * 15 + 5;
            snowflake.style.left = Math.random() * 100 + 'vw';
            snowflake.style.fontSize = size + 'px';
            
            // Random animation duration
            const duration = Math.random() * 15 + 5;
            snowflake.style.animationDuration = duration + 's';
            
            // Random delay
            const delay = Math.random() * 5;
            snowflake.style.animationDelay = delay + 's';
            
            snowContainer.appendChild(snowflake);
            
            // Remove snowflake after animation completes
            setTimeout(() => {
                snowflake.remove();
            }, (duration + delay) * 1000);
        }
        
        // Fireworks animation
        function startFireworksAnimation() {
            setInterval(createFirework, 2000);
        }
        
        function createFirework() {
            // Create firework starting point
            const firework = document.createElement('div');
            
            // Random position
            const posX = Math.random() * window.innerWidth;
            const posY = Math.random() * (window.innerHeight / 2);
            
            // Random color
            const colors = ['#ff6e95', '#a269ff', '#ffcc4d', '#ff9eb5', '#c8a6ff'];
            const color = colors[Math.floor(Math.random() * colors.length)];
            
            // Create explosion
            setTimeout(() => {
                createExplosion(posX, posY, color);
            }, 300);
        }
        
        function createExplosion(x, y, color) {
            // Create particles
            for (let i = 0; i < 40; i++) {
                const particle = document.createElement('div');
                particle.classList.add('firework');
                particle.style.left = x + 'px';
                particle.style.top = y + 'px';
                particle.style.backgroundColor = color;
                particle.style.boxShadow = `0 0 10px 2px ${color}`;
                
                // Random direction
                const angle = Math.random() * Math.PI * 2;
                const speed = Math.random() * 100 + 50;
                const vx = Math.cos(angle) * speed;
                const vy = Math.sin(angle) * speed;
                
                // Animation
                particle.animate(
                    [
                        { transform: 'translate(0, 0) scale(0)', opacity: 1 },
                        { transform: `translate(${vx}px, ${vy}px) scale(1)`, opacity: 0 }
                    ],
                    {
                        duration: 1500,
                        easing: 'cubic-bezier(0, 0.5, 0.5, 1)'
                    }
                );
                
                fireworksContainer.appendChild(particle);
                
                // Remove particle after animation
                setTimeout(() => {
                    particle.remove();
                }, 1500);
            }
        }
        
        // Toggle animations
        toggleHearts.addEventListener('change', () => {
            if (toggleHearts.checked) {
                startHeartsAnimation();
            } else {
                heartsContainer.innerHTML = '';
            }
        });
        
        toggleSnow.addEventListener('change', () => {
            if (toggleSnow.checked) {
                startSnowAnimation();
            } else {
                snowContainer.style.display = 'none';
                snowContainer.innerHTML = '';
            }
        });
        
        toggleFireworks.addEventListener('change', () => {
            if (toggleFireworks.checked) {
                startFireworksAnimation();
            } else {
                fireworksContainer.innerHTML = '';
            }
        });
        
        // Calculate days together
        function calculateDays() {
            if (!localStorage.getItem('anniversaryDate')) {
                // Default to today if not set
                localStorage.setItem('anniversaryDate', new Date().toISOString().split('T')[0]);
            }
            
            const startDate = new Date(localStorage.getItem('anniversaryDate'));
            const today = new Date();
            const timeDiff = today.getTime() - startDate.getTime();
            const dayDiff = Math.floor(timeDiff / (1000 * 3600 * 24));
            
            daysCount.textContent = dayDiff;
            anniversaryDate.value = localStorage.getItem('anniversaryDate');
        }
        
        calculateDays();
        
        // Save anniversary date
        anniversaryDate.addEventListener('change', () => {
            localStorage.setItem('anniversaryDate', anniversaryDate.value);
            calculateDays();
            showNotification('Ngày kỷ niệm đã được cập nhật!', 'success');
        });
        
        // Save new password
        savePassword.addEventListener('click', () => {
            if (newPassword.value.trim() !== '') {
                password = newPassword.value;
                localStorage.setItem('password', password);
                showNotification('Mật khẩu đã được cập nhật!', 'success');
                newPassword.value = '';
            } else {
                showNotification('Vui lòng nhập mật khẩu mới!', 'error');
            }
        });
        
        // Memory modal
        addMemory.addEventListener('click', () => {
            memoryModal.classList.add('show');
        });
        
        closeMemoryModal.addEventListener('click', () => {
            memoryModal.classList.remove('show');
        });
        
        memoryForm.addEventListener('submit', (e) => {
            e.preventDefault();
            
            const date = formatDate(memoryDate.value);
            const text = memoryText.value;
            
            if (date && text) {
                addMemoryToTimeline(date, text);
                
                // Save to localStorage
                const memories = JSON.parse(localStorage.getItem('memories') || '[]');
                memories.push({ date, text });
                localStorage.setItem('memories', JSON.stringify(memories));
                
                // Close modal and reset form
                memoryModal.classList.remove('show');
                memoryForm.reset();
                
                showNotification('Kỷ niệm đã được thêm thành công!', 'success');
            }
        });
        
        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('vi-VN', {
                day: '2-digit',
                month: '2-digit',
                year: 'numeric'
            });
        }
        
        function addMemoryToTimeline(date, text) {
            const timeline = document.getElementById('timelineContainer');
            const newMemory = document.createElement('div');
            newMemory.classList.add('timeline-item');
            newMemory.innerHTML = `
                <div class="timeline-content">
                    <div class="timeline-date"><i class="fas fa-calendar-heart"></i> ${date}</div>
                    <div class="timeline-text">${text}</div>
                </div>
            `;
            
            timeline.appendChild(newMemory);
            
            // Add animation
            setTimeout(() => {
                newMemory.style.opacity = 1;
                newMemory.style.transform = 'translateY(0)';
            }, 10);
        }
        
        // Image modal
        addImage.addEventListener('click', () => {
            imageModal.classList.add('show');
        });
        
        closeImageModal.addEventListener('click', () => {
            imageModal.classList.remove('show');
        });
        
        imageForm.addEventListener('submit', (e) => {
            e.preventDefault();
            
            const url = imageUrl.value;
            const caption = imageCaption.value;
            
            if (url) {
                addImageToGallery(url, caption);
                
                // Save to localStorage
                const images = JSON.parse(localStorage.getItem('images') || '[]');
                images.push({ url, caption });
                localStorage.setItem('images', JSON.stringify(images));
                
                // Close modal and reset form
                imageModal.classList.remove('show');
                imageForm.reset();
                
                showNotification('Ảnh đã được thêm thành công!', 'success');
            }
        });
        
        function addImageToGallery(url, caption) {
            const gallery = document.querySelector('.gallery');
            const addImageBtn = document.getElementById('addImage');
            
            const newImage = document.createElement('div');
            newImage.classList.add('gallery-item');
            newImage.innerHTML = `
                <img src="${url}" alt="${caption}">
                <div class="caption">${caption}</div>
            `;
            
            // Insert before the "Add Image" button
            gallery.insertBefore(newImage, addImageBtn.nextSibling);
        }
        
        // Close modals when clicking outside
        window.addEventListener('click', (e) => {
            if (e.target === memoryModal) {
                memoryModal.classList.remove('show');
            }
            if (e.target === imageModal) {
                imageModal.classList.remove('show');
            }
        });
        
        // Load saved memories if exist
        if (localStorage.getItem('memories')) {
            const memories = JSON.parse(localStorage.getItem('memories'));
            const timeline = document.getElementById('timelineContainer');
            
            // Clear default memories
            timeline.innerHTML = '';
            
            memories.forEach(memory => {
                addMemoryToTimeline(memory.date, memory.text);
            });
        }
        
        // Load saved images if exist
        if (localStorage.getItem('images')) {
            const images = JSON.parse(localStorage.getItem('images'));
            
            images.forEach(image => {
                addImageToGallery(image.url, image.caption);
            });
        }
        
        // Load saved password if exists
        if (localStorage.getItem('password')) {
            password = localStorage.getItem('password');
        }
        
        // Add Font Awesome icons where they're missing
        document.querySelector('.fa-envelope-open-heart').classList.add('fa-envelope');
        document.querySelector('.fa-calendar-heart').classList.add('fa-calendar-check');
    </script>
</body>
</html>
