<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Tâm Thư Gửi Người Yêu</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@300;400;500;600;700&family=Dancing+Script:wght@400;500;600;700&family=Pacifico&family=Quicksand:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Loading Screen -->
    <div class="loading" id="loadingScreen">
        <div class="loading-spinner"></div>
        <div class="loading-text">Đang tải tâm thư...</div>
    </div>

    <!-- Password Screen -->
    <div class="password-screen" id="passwordScreen">
        <div class="password-container">
            <h2>Tâm Thư Yêu Thương</h2>
            <p>Nhập mật khẩu để mở lá thư tình này</p>
            <input type="password" id="passwordInput" placeholder="Nhập mật khẩu...">
            <button id="submitPassword"><i class="fas fa-heart"></i> Mở Thư</button>
        </div>
    </div>
    
    <!-- Notification -->
    <div class="notification" id="notification">
        <i class="fas fa-check-circle"></i>
        <span id="notificationText">Thông báo</span>
    </div>
    
    <!-- Main Content -->
    <div class="content" id="mainContent">
        <header>
            <h1>Tâm Thư Gửi Người Yêu</h1>
            <p>Những lời yêu thương chân thành nhất...</p>
        </header>
        
        <div class="love-days-container">
            <div class="love-days" id="loveDays">
                <span class="love-days-label">Chúng ta đã yêu nhau được</span>
                <div class="love-days-counter">
                    <span id="daysCount">0</span>
                    <span class="love-days-unit">ngày</span>
                </div>
            </div>
        </div>
        
        <div class="main-container">
            <!-- Shared title (chỉ hiển thị khi ở chế độ chia sẻ) -->
            <div class="shared-title">
                <h3><i class="fas fa-envelope-open"></i> Tâm Thư Dành Cho Bạn</h3>
            </div>
            
            <!-- Tabs (chỉ hiển thị khi là chủ sở hữu) -->
            <div class="tabs owner-only">
                <button class="tab-btn active" data-tab="letter"><i class="fas fa-envelope"></i> Tâm Thư</button>
                <button class="tab-btn" data-tab="gallery"><i class="fas fa-images"></i> Kỷ Niệm</button>
                <button class="tab-btn" data-tab="timeline"><i class="fas fa-clock"></i> Dòng Thời Gian</button>
                <button class="tab-btn" data-tab="share"><i class="fas fa-share-alt"></i> Chia Sẻ</button>
                <button class="tab-btn" data-tab="settings"><i class="fas fa-cog"></i> Cài Đặt</button>
            </div>
            
            <!-- Letter Tab -->
            <div class="tab-content active" id="letter">
                <div class="letter-container">
                    <div class="letter-view-mode">
                        <h3 class="section-title owner-only"><i class="fas fa-heart"></i> Tâm Thư Của Bạn</h3>
                        <div class="letter" id="letterDisplay"></div>
                        <button class="edit-letter-btn owner-only" id="switchToEditMode"><i class="fas fa-edit"></i> Chỉnh Sửa Tâm Thư</button>
                    </div>
                    
                    <div class="letter-edit-mode" style="display: none;">
                        <h3 class="section-title"><i class="fas fa-edit"></i> Chỉnh Sửa Tâm Thư</h3>
                        <div class="text-controls">
                            <div class="text-controls-title"><i class="fas fa-paint-brush"></i> Tùy chỉnh văn bản</div>
                            <div class="control-group">
                                <label>Font chữ:</label>
                                <select class="font-selector" id="fontSelector">
                                    <option value="font-quicksand">Quicksand</option>
                                    <option value="font-dancing-script">Dancing Script</option>
                                    <option value="font-pacifico">Pacifico</option>
                                    <option value="font-comfortaa">Comfortaa</option>
                                </select>
                            </div>
                            <div class="control-group">
                                <label>Màu sắc:</label>
                                <input type="color" class="color-picker" id="colorPicker" value="#ff6e95">
                            </div>
                            <div class="control-group">
                                <label>Hiệu ứng:</label>
                                <button class="effect-btn" data-effect="effect-shadow">Bóng</button>
                                <button class="effect-btn" data-effect="effect-glow">Phát Sáng</button>
                                <button class="effect-btn" data-effect="effect-gradient">Gradient</button>
                            </div>
                        </div>
                        <textarea class="edit-letter" id="letterEditor" placeholder="Nhập tâm thư của bạn tại đây...

Gửi người yêu của anh,

Anh không giỏi thể hiện cảm xúc bằng lời nói, nên anh viết ra những dòng này để em biết rằng em là điều tuyệt vời nhất trong cuộc sống của anh.

Mỗi khoảnh khắc bên em đều là khoảnh khắc quý giá. Mỗi nụ cười của em đều làm trái tim anh rung động. Mỗi ngày trôi qua đều đáng giá vì có em bên cạnh.

Anh yêu em nhiều lắm!"></textarea>
                        <div class="letter-edit-buttons">
                            <button class="cancel-edit-btn" id="cancelEdit"><i class="fas fa-times"></i> Hủy</button>
                            <button class="save-letter" id="saveLetter"><i class="fas fa-save"></i> Lưu Tâm Thư</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Gallery Tab (chỉ hiển thị khi là chủ sở hữu) -->
            <div class="tab-content owner-only" id="gallery">
                <div class="gallery">
                    <div class="add-image" id="addImage">
                        <i class="fas fa-plus-circle"></i>
                        <p>Thêm ảnh kỷ niệm</p>
                    </div>
                    <!-- Sample images -->
                    <div class="gallery-item">
                        <img src="https://images.unsplash.com/photo-1522119067110-34ab169d8507?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80" alt="Kỷ niệm">
                        <div class="caption">Ngày đầu tiên</div>
                    </div>
                    <div class="gallery-item">
                        <img src="https://images.unsplash.com/photo-1556742031-c6961e8560b0?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80" alt="Kỷ niệm">
                        <div class="caption">Bình minh cùng nhau</div>
                    </div>
                    <div class="gallery-item">
                        <img src="https://images.unsplash.com/photo-1549221952-37f4399abb8a?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80" alt="Kỷ niệm">
                        <div class="caption">Chuyến đi biển</div>
                    </div>
                    <div class="gallery-item">
                        <img src="https://images.unsplash.com/photo-1474552226712-ac0f0961a954?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80" alt="Kỷ niệm">
                        <div class="caption">Lễ kỷ niệm</div>
                    </div>
                </div>
            </div>
            
            <!-- Timeline Tab (chỉ hiển thị khi là chủ sở hữu) -->
            <div class="tab-content owner-only" id="timeline">
                <div class="timeline" id="timelineContainer">
                    <div class="timeline-item">
                        <div class="timeline-content">
                            <div class="timeline-date"><i class="fas fa-calendar-alt"></i> 12/01/2024</div>
                            <div class="timeline-text">Ngày chúng ta gặp nhau lần đầu tiên tại quán cafe ấy. Ánh mắt em đã làm trái tim anh rung động.</div>
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-content">
                            <div class="timeline-date"><i class="fas fa-calendar-alt"></i> 14/02/2024</div>
                            <div class="timeline-text">Valentine đầu tiên của chúng ta. Anh vẫn nhớ nụ cười rạng rỡ của em khi nhận được bó hoa hồng.</div>
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-content">
                            <div class="timeline-date"><i class="fas fa-calendar-alt"></i> 20/03/2024</div>
                            <div class="timeline-text">Chuyến du lịch đầu tiên cùng nhau. Biển xanh, cát trắng và nắng vàng - cùng với tình yêu của chúng ta.</div>
                        </div>
                    </div>
                </div>
                <button class="add-memory" id="addMemory"><i class="fas fa-plus"></i> Thêm Kỷ Niệm</button>
            </div>
            
            <!-- Share Tab (chỉ hiển thị khi là chủ sở hữu) -->
            <div class="tab-content owner-only" id="share">
                <div class="share-container">
                    <h3 class="section-title"><i class="fas fa-share-alt"></i> Chia Sẻ Tâm Thư</h3>
                    <p class="share-description">Tạo link để chia sẻ tâm thư với người thân yêu. Họ sẽ chỉ thấy nội dung tâm thư mà không thấy các phần chỉnh sửa và cài đặt.</p>
                    
                    <div class="share-options">
                        <div class="qr-code-container">
                            <div class="qr-code" id="qrCode"></div>
                            <p>Quét mã QR để xem tâm thư</p>
                        </div>
                        <div class="share-links">
                            <h4>Chia sẻ qua:</h4>
                            <div class="share-buttons">
                                <button class="share-btn facebook"><i class="fab fa-facebook-f"></i> Facebook</button>
                                <button class="share-btn twitter"><i class="fab fa-twitter"></i> Twitter</button>
                                <button class="share-btn whatsapp"><i class="fab fa-whatsapp"></i> WhatsApp</button>
                                <button class="share-btn telegram"><i class="fab fa-telegram-plane"></i> Telegram</button>
                            </div>
                            <div class="copy-link">
                                <input type="text" id="shareLink" readonly>
                                <button id="copyLinkBtn"><i class="fas fa-copy"></i> Copy</button>
                            </div>
                            <div class="password-protect">
                                <label>
                                    <input type="checkbox" id="requirePassword"> Yêu cầu mật khẩu khi xem
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Settings Tab (chỉ hiển thị khi là chủ sở hữu) -->
            <div class="tab-content owner-only" id="settings">
                <div class="settings-section">
                    <h3><i class="fas fa-magic"></i> Cài Đặt Hiệu Ứng</h3>
                    <div class="settings-option">
                        <label class="toggle-switch">
                            <input type="checkbox" id="toggleHearts" checked>
                            <span class="toggle-slider"></span>
                        </label>
                        <span>Hiệu ứng trái tim bay</span>
                    </div>
                    <div class="settings-option">
                        <label class="toggle-switch">
                            <input type="checkbox" id="toggleSnow">
                            <span class="toggle-slider"></span>
                        </label>
                        <span>Hiệu ứng tuyết rơi</span>
                    </div>
                    <div class="settings-option">
                        <label class="toggle-switch">
                            <input type="checkbox" id="toggleFireworks">
                            <span class="toggle-slider"></span>
                        </label>
                        <span>Hiệu ứng pháo hoa</span>
                    </div>
                </div>
                
                <div class="settings-section">
                    <h3><i class="fas fa-calendar-alt"></i> Cài Đặt Ngày Kỷ Niệm</h3>
                    <div class="settings-option">
                        <span>Ngày bắt đầu yêu nhau:</span>
                        <input type="date" id="anniversaryDate" class="date-input">
                    </div>
                </div>
                
                <div class="settings-section">
                    <h3><i class="fas fa-lock"></i> Đổi Mật Khẩu</h3>
                    <div style="margin: 20px 0;">
                        <input type="password" id="newPassword" class="password-input" placeholder="Nhập mật khẩu mới">
                        <button id="savePassword" class="save-settings"><i class="fas fa-save"></i> Lưu Mật Khẩu</button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Music Control (chỉ hiển thị khi là chủ sở hữu) -->
        <div class="music-control owner-only" id="musicControl">
            <i class="fas fa-music"></i>
        </div>
        
        <!-- Return to edit mode button (dành cho chế độ chia sẻ) -->
        <div class="return-to-edit shared-only">
            <button id="returnToEditBtn"><i class="fas fa-edit"></i> Trở về chế độ chỉnh sửa</button>
        </div>
        
        <!-- Audio Element -->
        <audio id="bgMusic" loop>
            <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mp3">
            Your browser does not support the audio element.
        </audio>
        
        <!-- Animations Containers -->
        <div class="hearts-container" id="heartsContainer"></div>
        <div class="snow-container" id="snowContainer"></div>
        <div class="fireworks-container" id="fireworksContainer"></div>
        
        <!-- Decorative elements -->
        <div class="decoration top-left"><i class="fas fa-heart"></i></div>
        <div class="decoration top-right"><i class="fas fa-dove"></i></div>
        <div class="decoration bottom-left"><i class="fas fa-star"></i></div>
        <div class="decoration bottom-right"><i class="fas fa-heart"></i></div>
    </div>
    
    <!-- Add Memory Modal -->
    <div class="modal" id="memoryModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Thêm Kỷ Niệm Mới</h3>
                <button class="modal-close" id="closeMemoryModal">&times;</button>
            </div>
            <form class="modal-form" id="memoryForm">
                <div class="form-group">
                    <label for="memoryDate">Ngày kỷ niệm:</label>
                    <input type="date" id="memoryDate" required>
                </div>
                <div class="form-group">
                    <label for="memoryText">Mô tả kỷ niệm:</label>
                    <textarea id="memoryText" placeholder="Viết về kỷ niệm đặc biệt của bạn..." required></textarea>
                </div>
                <button type="submit" class="modal-submit">Lưu Kỷ Niệm</button>
            </form>
        </div>
    </div>
    
    <!-- Add Image Modal -->
    <div class="modal" id="imageModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Thêm Ảnh Mới</h3>
                <button class="modal-close" id="closeImageModal">&times;</button>
            </div>
            <form class="modal-form" id="imageForm">
                <div class="form-group">
                    <label for="imageUrl">URL Ảnh:</label>
                    <input type="text" id="imageUrl" placeholder="https://example.com/your-image.jpg" required>
                    <small style="display: block; margin-top: 5px; color: #666;">(Trong bản thực tế, bạn có thể tải ảnh lên từ máy tính)</small>
                </div>
                <div class="form-group">
                    <label for="imageCaption">Chú thích:</label>
                    <input type="text" id="imageCaption" placeholder="Mô tả về ảnh..." required>
                </div>
                <button type="submit" class="modal-submit">Lưu Ảnh</button>
            </form>
        </div>
    </div>
    
    <!-- QR Code library -->
    <script src="https://cdn.jsdelivr.net/npm/qrcode.js/lib/qrcode.min.js"></script>
    
    <!-- Custom JavaScript -->
    <script src="script.js"></script>
</body>
</html>
